#!/usr/bin/env bash
set -euf -o pipefail
device_common_install_sh_lib_dir="$("$(dirname "$0")/pkg-nsf-device-common-install-get-sh-lib-dir")"
. "$device_common_install_sh_lib_dir/tools.sh"

declare boot_device
boot_device="${1?}"

# Currently, expect a partitioning compatible with what is
# performed by 'hw-config-boot-device-partition-efi'
# or 'hw-config-boot-device-partition-legacy'.
declare nixos_part="${boot_device}1"

liveenv-nixos-partition-umount
hw-config-boot-device-remove-lvm "$nixos_part"

